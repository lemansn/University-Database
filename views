CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `curriculum_rate` AS select `matching_rate`.`CurrCode` AS `CurrCode`,format((sum(`matching_rate`.`Matching Rate %`) / (select count(0) from `matching_rate`)),1) AS `Curriculum Rate %` from `matching_rate` group by `matching_rate`.`CurrCode`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `matching_rate` AS select `x`.`CurrCode` AS `CurrCode`,`x`.`CoCode` AS `CourseCode`,`x`.`CoName` AS `CoName`,format(((count(0) / (select count(0) from (`subjects` join `course`) where ((`course`.`CoCode` = `x`.`CoCode`) and (`course`.`CoCode` = `subjects`.`CoCode`)))) * 100),1) AS `Matching Rate %` from (select `areas`.`Area` AS `Area`,`course`.`CoName` AS `CoName`,`course`.`CoCode` AS `CoCode`,`curriculum`.`CurrCode` AS `CurrCode` from ((((((`areas` join `subjects`) join `course`) join `section`) join `teaches`) join `person`) join `curriculum`) where ((`section`.`SectionID` = `teaches`.`SectionID`) and (`section`.`CoCode` = `course`.`CoCode`) and (`teaches`.`InstID` = `person`.`PersonID`) and (`areas`.`PersonID` = `person`.`PersonID`) and (`subjects`.`CoCode` = `course`.`CoCode`) and (`course`.`CurrCode` = `curriculum`.`CurrCode`)) intersect select `subjects`.`Subject` AS `Subject`,`course`.`CoName` AS `CoName`,`course`.`CoCode` AS `CoCode`,`curriculum`.`CurrCode` AS `CurrCode` from ((((((`areas` join `subjects`) join `course`) join `section`) join `teaches`) join `person`) join `curriculum`) where ((`section`.`SectionID` = `teaches`.`SectionID`) and (`section`.`CoCode` = `course`.`CoCode`) and (`teaches`.`InstID` = `person`.`PersonID`) and (`areas`.`PersonID` = `person`.`PersonID`) and (`subjects`.`CoCode` = `course`.`CoCode`) and (`course`.`CurrCode` = `curriculum`.`CurrCode`))) `X` group by `x`.`CoCode`,`x`.`CoName`,`x`.`CurrCode`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `view_gpa` AS select `takes`.`PersonID` AS `PersonID`,(sum((`takes`.`SecPoint` * `course`.`Credits`)) / sum(`course`.`Credits`)) AS `GPA_Upon_100` from ((`takes` join `section`) join `course`) where ((`takes`.`SectionID` = `section`.`SectionID`) and (`section`.`CoCode` = `course`.`CoCode`)) group by `takes`.`PersonID`;
